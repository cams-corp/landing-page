---
import Button from '../common/Button.astro';
import { getWhatsAppUrl } from '../../utils/whatsapp';

interface Props {
  name: string;
  price: string;
  sessions: number;
  recommended?: boolean;
  features: string[];
  class?: string;
}

const {
  name,
  price,
  sessions,
  recommended = false,
  features,
  class: className = ''
} = Astro.props;

const whatsappUrl = getWhatsAppUrl(`Hola Camila, quiero comprar el ${name}`);
---

<div class={`bg-white rounded-lg shadow-lg p-8 relative hover:shadow-xl transition-shadow duration-300 flex flex-col ${recommended ? 'border-4 border-primary' : 'border border-gray-200'} ${className}`}>
  {recommended && (
    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
      <span class="bg-primary text-white px-6 py-2 rounded-full text-sm font-bold shadow-md">
        Recomendado
      </span>
    </div>
  )}

  <div class="text-center mb-6">
    <h3 class="text-2xl font-bold text-gray-900 mb-2">
      {name}
    </h3>
    <div class="text-4xl font-bold text-primary mb-2">
      {price}
    </div>
    <p class="text-gray-600">
      {sessions} sesiones individuales
    </p>
  </div>

  <ul class="space-y-3 mb-8 flex-grow">
    {features.map((feature) => (
      <li class="flex items-start">
        <span class="text-green-600 mr-2 flex-shrink-0">âœ“</span>
        <span class="text-gray-700">{feature}</span>
      </li>
    ))}
  </ul>

  <div class="mt-auto">
    <Button
      variant={recommended ? "primary" : "secondary"}
      text="Seleccionar Plan"
      href={whatsappUrl}
      size="md"
      class="w-full"
    />
  </div>
</div>
